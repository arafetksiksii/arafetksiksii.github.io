<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIGGY</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <style>
        @font-face {
            font-family: 'Minecraft';
            src: url('fonts/Minecraft.ttf');
        }

        body {
            margin: 0;
            padding: 0;
            background-color: black;
            font-family: 'Minecraft', sans-serif;
            color: white;
            overflow: hidden; /* Prevent body scrolling */
        }

        /* Background Video */
        video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }
        .no-affiliation img {
            display: none;
        }
        .frame-container {
            position: relative;
            background: url('images/frame_pc.png') no-repeat center center;
            background-size: 100% 100%;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 1; /* Above the background video */
        }

        /* Logo and Navigation */
        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 90%;
            margin-top: 35px;
        }

        .header .logo {
            height: 40px;
            margin-bottom: 10px; /* Space between logo and navigation */
            margin-top: 25px;
        }

        .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1220px; /* Space between back arrow and cart */
        }

        .navigation img {
            height: 30px;
            cursor: pointer;
        }

        .shop-title {
            margin: 20px 0;
        }

        .shop-title img {
            height: 50px;
        }

        /* Window Box */
        .product-window {
            position: relative;
            background: url('images/window_home_pc.png') no-repeat center center;
            background-size: contain;
            width: 80%;
            height: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            z-index: 2; /* Above the glitch background */
        }

/* Products */
.product-list-container {
    flex: 1;
    width: 90%;
    height: auto; /* Let it grow based on content */
    max-height: 40vh; /* Set a maximum height so it doesn't grow too tall */
    overflow-y: auto; /* Enable vertical scrolling if content overflows */
    display: flex;
    justify-content: center;
    align-items: flex-start; /* Align items to the top */
    margin-bottom: 0px;
    padding-top: 0;
}



/* Hide the default scrollbar track but keep the thumb */
.product-list-container::-webkit-scrollbar {
    width: 10px; /* Customize scrollbar width */
}

.product-list-container::-webkit-scrollbar-thumb {
    background: #888; /* Customize scrollbar thumb color */
    border-radius: 5px; /* Rounded edges for the scrollbar thumb */
}

.product-list-container::-webkit-scrollbar-thumb:hover {
    background: #555; /* Darker color on hover */
}

.product-list-container::-webkit-scrollbar-track {
    background: transparent; /* Make the scrollbar track transparent */
}



.product-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Two columns */
    gap: 20px; /* Space between products */
    justify-items: center; /* Center align products within the grid */
    align-items: start; /* Align items at the start of their grid cells */
    margin-top: 0px;  /* Pulls items 40px closer */

}

        .product {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 15px;
            width: calc(50% - 30px);
        }

        .product img {
            height: 250px; /* Larger product images */
            margin: 50px 0;
        }

        .product-title {
            font-size: 16px;
            margin-bottom: -50px;
            width: 250px;
            margin-left: 70px;
        }

        .product-price {
            font-size: 22px;
            margin-bottom: 0px;
            margin-top: -30px;

        }

        .buy-button {
            height: 30px !important; /* Force the height */
            width: auto !important; /* Maintain aspect ratio */
            cursor: pointer;
            object-fit: contain; /* Ensures the image fits within the dimensions */
        }

        /* Mobile adjustment for the frame */
        @media (max-width: 768px) { 
            .loader-container img {
        content: url('images/loading_phone.gif'); /* Change the gif for smaller screens */
    }
    .frame-container {
        background: url('images/frame_phone.png') no-repeat center center;
        background-size: 100% 100%;
        height: 100vh; /* Ensure the frame container takes full viewport height */
        overflow: hidden; /* Prevent the body from scrolling */
    }

    /* Remove product window background image */
    .product-window {
            position: relative;
            background: none;
            background-size: contain;
            width: 70%;
            height: 45%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            z-index: 2; /* Above the glitch background */
        }
    .no-affiliation img {
            display: block;
        }
    .header .logo {
        height: 35px;
        padding-top: 20px;  
        padding-bottom: 10px;      
    }

    .navigation img {
        height: 35px;
        padding-bottom: 0px;
    }

    .shop-title img {
        height: 30px;
        margin-right: 150px;
        margin-bottom: 0px;
    }

    .product-list-container {
        padding-top: 00px; /* Adjust padding for better spacing on mobile */
        height: 60%; /* Limit height to allow scrolling only in the product list */
        width: 60%;
        overflow-y: auto; /* Enable vertical scrolling */
        overflow-x: hidden; /* Disable horizontal scrolling */
        margin-bottom: 50px;
    }

    .product-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Two columns */
    gap: 0px; /* Reduced space between products */
    justify-items: center; /* Center align products within the grid */
    align-items: start; /* Align items at the start of their grid cells */
}


    .product {
        width: 100%; /* Make the product take full width */
        margin: 0; /* Remove margin for better alignment */
        margin-left: -60px;
        margin-right: -60px;
        margin-bottom: -30px;
        margin-top: -30px;
        
    }

    .product img {
        height: 130px; /* Smaller product images */
    }

    .product-title {
        font-size: 8px; /* Smaller title font size */
        margin-left: 0; /* Remove left margin for better alignment */
        margin-bottom: 0px;
        text-align: center; /* Center the product title */
    }

    .product-price {
        font-size: 14px; /* Smaller price font size */
        margin-top: 0px;
    }

    .buy-button {
        width: 60%; /* Make the buy button smaller */
        height: auto;
        margin-top: 0px;
    }
    .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 180px; /* Space between back arrow and cart */
        }
}


        /* Loader styles */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loader-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Hide loader when the page is loaded */
        body.loaded .loader-container {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader-container">
        <img src="images/loading_pc.gif" alt="Loading">
    </div>  

    <video autoplay muted loop>
        <source src="images/glitch_background.webm" type="video/mp4">
    </video>

    <div class="frame-container">
        <!-- Header -->
        <div class="header">
            <img class="logo" src="images/jiggy_text_white.png" alt="JIGGY Logo">
            <div class="navigation">
                <img class="back-arrow" src="images/icon_arrow_left.png" alt="Back" onclick="location.href='/home'">
                <img class="cart" src="images/cart_empty.png" alt="Cart"  onclick="location.href='/cart'">
            </div>
        </div>

        <!-- Shop Title -->
        <div class="shop-title">
            <img src="images/Shop1.png" alt="Shop">
        </div>

        <!-- Product Window -->
        <div class="product-window">
            <!-- Product List Container -->
            <div class="product-list-container">
                <div class="product-list">
                    <!-- Product Template -->
                    <div class="product">
                        <div class="product-title">Product 1</div>
                        <img src="images/product1.png" alt="Product 1">
                        <div class="product-price">$10.00</div>
                        <img class="buy-button" src="images/buy_btn.png" alt="Buy">
                    </div>

                    <div class="product">
                        <div class="product-title">Product 2</div>
                        <img src="images/product1.png" alt="Product 2">
                        <div class="product-price">$15.00</div>
                        <img class="buy-button" src="images/buy_btn.png" alt="Buy">
                    </div>

                    <div class="product">
                        <div class="product-title">Product 3</div>
                        <img src="images/product1.png" alt="Product 3">
                        <div class="product-price">$20.00</div>
                        <img class="buy-button" src="images/buy_btn.png" alt="Buy">
                    </div>

                    <div class="product">
                        <div class="product-title">Product 4</div>
                        <img src="images/product1.png" alt="Product 4">
                        <div class="product-price">$25.00</div>
                        <img class="buy-button" src="images/buy_btn.png" alt="Buy">
                    </div>
                </div>
            </div>
        </div>
        <!-- Additional images for small screens -->
        <div class="no-affiliation" style="text-align: center; margin-top: 20px;">
            <img src="images/NO AFFILIATION.png" alt="No Affiliation">
        </div>

    </div>

    <script>
        // Remove the loader after the page is fully loaded
        window.addEventListener('load', function () {
            document.body.classList.add('loaded');
        });
    </script>

        <script>
    // Fetch product data from the API

fetch('https://intense-ridge-55408-683d19fc1100.herokuapp.com/products/')
    .then(response => response.json())
    .then(products => {
        // Select the product list container
        const productListContainer = document.querySelector('.product-list');

        // Clear any existing product items
        productListContainer.innerHTML = '';

        // Loop through the products and create new product elements
        products.forEach(product => {
            const productElement = document.createElement('div');
            productElement.classList.add('product');

            productElement.innerHTML = `
                <div class="product-title">${product.title}</div>
                <img src="${product.image}" alt="${product.title}">
                <div class="product-price">${product.price} TND</div>
                <img class="buy-button" src="images/buy_btn.png" alt="Buy">
            `;

            // Add click event to navigate to product-detail page
            productElement.addEventListener('click', () => {
                window.location.href = `/product-detail?_id=${product._id}`;
            });

            // Append the new product element to the product list
            productListContainer.appendChild(productElement);
        });

        // Hide the loader when the data is loaded
        document.body.classList.add('loaded');
    })
    .catch(error => {
        console.error('Error fetching products:', error);
    });


</script>

<script>
    // Check if cart exists in localStorage and is not empty
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // Select the cart image element
    const cartImage = document.querySelector('.cart');
    
    // Change the cart image if there are items in the cart
    if (cart.length > 0) {
        cartImage.src = 'images/cart.png'; // Set the image to cart.png
    } else {
        cartImage.src = 'images/cart_empty.png'; // Set the image to cart_empty.png
    }
    </script>
    
</body>
</html>
